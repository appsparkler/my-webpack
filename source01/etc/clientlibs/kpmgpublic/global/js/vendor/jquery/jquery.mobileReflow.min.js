/**
 * jQuery Mobile Priority Reflow
 * Reflows components on a template level based on mobile prioity
 *
 * @author <a href='mailto:bdrummond2@sapient.com'>Brent Drummond</a>
 * @version 0.2
 * @requires jquery 1.7+
 *
 * Known Issues:
 * None
 *
 * Changelog:
 * v0.1 - Initial build
 * v0.2 - Changed so script only empties and reflows divs where the mobile and the desktop order do not match
 *        Was previously removing and replacing all divs.
 *
 * Usage:
 * In the template HTML where this should be used, two attributes must be placed in the component containers:
 *
 * data-desktop-cell - This is the initial order of the compoents on the page. This should be sequential to initial component 
 * order in the template.
 * data-mobile-cell  - This is the new sort order. You must number these based on the sequence of components on mobile.
 * To make the javascript functionaity work, simply add 'jquerymobilereflow' to the template level javascript define like the 
 * example below:
 * define(['jquery', 'navigation', 'navflyouta', 'navflyoutb', 'navflyoutc', 'footer', 'jquerymobilereflow'],
 * This will load the script and make it available to the template. 
 * 
 * Example:
 * <div class="col-md-12 tmpl-row" data-desktop-cell="1"  data-mobile-cell="4">
 *      {{component include}}
 * </div>
 * 
 * In the above example, this would be the first component within our template. When the mobile breakpoint is detected 
 * (currently 641px and below). The components will reorder, and this will be the 4th component on the page.
 * When the mobile breakpoint is detected, the script will go through all divs containing the "data-desktop-cell" attribute 
 * and populate the $elements arrary if the orders do not match, and then empty the HTML from the div. It will then repopulate 
 * the divs based on mobile sort order. On orientation change from mobile to desktop breakpoints the process is reveresed.
 **/
define(["jquery"],function(t){"use strict";function e(e){"toMobile"===e?(t("div").each(function(){if(t(this).attr("data-desktop-cell")){var e=parseInt(t(this).attr("data-desktop-cell")),o=parseInt(t(this).attr("data-mobile-cell")),i=t(this).html();e!==o&&(n.push({originalOrder:e,mobileOrder:o,htmlContents:i}),t(this).empty())}}),o(n,"toMobile")):(t("div").each(function(){if(t(this).attr("data-desktop-cell")){var e=parseInt(t(this).attr("data-desktop-cell")),o=parseInt(t(this).attr("data-mobile-cell"));e!==o&&t(this).empty()}}),o(n,"toDesktop"))}function o(e,o){"toMobile"===o?(t.each(e,function(o){t("div").find('[data-desktop-cell="'+e[o].mobileOrder+'"]').html(e[o].htmlContents)}),t("body").addClass("contents-reflowed"),t(document).trigger("mobilereflowedFinished")):(t.each(e,function(o){t("div").find('[data-desktop-cell="'+e[o].originalOrder+'"]').html(e[o].htmlContents)}),t("body").removeClass("contents-reflowed")),t(document).trigger("reflow.complete")}var n=[];t(function(){t(document).on("mobileBreakpoint",function(){t("body").hasClass("contents-reflowed")||e("toMobile")}),t(document).on("desktopBreakpoint",function(){t("body").hasClass("contents-reflowed")&&e("toDesktop")})})});